<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>åˆ›å»ºæŠ¥ä»·å•</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      padding-top: 70px; /* ç»™å¯¼èˆªæ è®©å‡ºç©ºé—´ */
      background: url('/static/order_background.png') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .main-card {
      background: white;
      border-radius: 1rem;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      padding: 2rem;
    }
    h2 {
      font-family: 'Segoe UI Semibold';
      text-shadow: 1px 1px 2px #ccc;
    }
    .btn-highlight {
      background: #2563eb;
      color: white;
      font-weight: bold;
      box-shadow: 0 0 6px rgba(37,99,235,0.4);
    }
    .btn-highlight:hover {
      background: #1e40af;
    }
    table input {
      min-width: 120px;
    }
  </style>
</head>
<body>
  <nav style="position: fixed; top: 0; left: 0; right: 0; height: 56px; background: #1b5899; color: white; display: flex; align-items: center; justify-content: space-around; z-index: 9999; font-family: 'Segoe UI', sans-serif; font-size: 15px;">
  <a href="/order/create-inquiry" style="color: white; text-decoration: none;">ğŸ“ åˆ›å»ºè¯¢ä»·</a>
  <a href="/order/edit-inquiry" style="color: white; text-decoration: none;">âœï¸ ä¿®æ”¹è¯¢ä»·</a>
  <a href="/order/query-inquiry" style="color: white; text-decoration: none;">ğŸ” æŸ¥è¯¢è¯¢ä»·</a>
  <a href="/order/create-quote" style="color: white; text-decoration: none;">ğŸ“„ åˆ›å»ºæŠ¥ä»·</a>
  <a href="/order/edit-quote" style="color: white; text-decoration: none;">ğŸ–‹ï¸ ä¿®æ”¹æŠ¥ä»·</a>
  <a href="/order/query-quote" style="color: white; text-decoration: none;">ğŸ“Š æŸ¥è¯¢æŠ¥ä»·</a>
  <a href="/order/create-order" style="color: white; text-decoration: none;">ğŸ›’ åˆ›å»ºè®¢å•</a>
  <a href="/order/edit-order" style="color: white; text-decoration: none;">ğŸ” ä¿®æ”¹è®¢å•</a>
  <a href="/order/query-order" style="color: white; text-decoration: none;">ğŸ’¾ æŸ¥è¯¢è®¢å•</a>
</nav>
<div class="container py-5">
  <div class="main-card mx-auto" style="max-width: 1000px;">
    <h2 class="text-center mb-4">åˆ›å»ºæŠ¥ä»·å•</h2>
    <form method="POST">
      <!-- ä¸»ä¿¡æ¯ -->
      <div class="row g-3">
        <div class="col-md-6">
          <label>æŠ¥ä»·å•å·</label>
          <input type="text" class="form-control" name="quotation_id" required>
        </div>
        <div class="col-md-6">
          <label>å®¢æˆ·ç¼–å·</label>
          <input type="text" class="form-control" name="customer_id">
        </div>
        <div class="col-md-6">
          <label>å…³è”è¯¢ä»·å•å·</label>
          <input type="text" class="form-control" name="inquiry_id">
        </div>
        <div class="col-md-6">
          <label>æŠ¥ä»·æ—¥æœŸ</label>
          <input type="date" class="form-control" name="quotation_date">
        </div>
        <div class="col-md-6">
          <label>æœ‰æ•ˆæœŸè‡³</label>
          <input type="date" class="form-control" name="valid_until_date">
        </div>
        <div class="col-md-6">
          <label>é”€å”®äººå‘˜ç¼–å·</label>
          <input type="text" class="form-control" name="salesperson_id">
        </div>
        <div class="col-md-6">
          <label>æ€»é‡‘é¢</label>
          <input type="number" class="form-control" name="total_amount" step="0.01">
        </div>
        <div class="col-md-6">
          <label>å¤‡æ³¨</label>
          <input type="text" class="form-control" name="remarks">
        </div>
      </div>

      <!-- æ˜ç»†ä¿¡æ¯è¡¨æ ¼ -->
      <h5 class="mt-5 mb-3">æŠ¥ä»·æ˜ç»†</h5>
      <div class="table-responsive">
        <table class="table table-bordered align-middle text-center" id="itemTable">
          <thead class="table-light">
          <tr>
            <th>è¡Œå·</th><th>ç‰©æ–™ç¼–å·</th><th>æ•°é‡</th><th>å•ä»·</th><th>æŠ˜æ‰£%</th><th>é‡‘é¢</th><th>å•ä½</th><th>å…³è”è¯¢ä»·é¡¹</th><th>æ“ä½œ</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td><input name="item_no" type="number" class="form-control"></td>
            <td><input name="material_id" type="text" class="form-control"></td>
            <td><input name="quotation_quantity" type="number" class="form-control"></td>
            <td><input name="unit_price" type="number" step="0.01" class="form-control"></td>
            <td><input name="discount_rate" type="number" class="form-control"></td>
            <td><input name="item_amount" type="number" step="0.01" class="form-control"></td>
            <td><input name="unit" type="text" class="form-control"></td>
            <td><input name="inquiry_item_id" type="text" class="form-control"></td>
            <td><button type="button" class="btn btn-sm btn-danger" onclick="removeRow(this)">åˆ é™¤</button></td>
          </tr>
          </tbody>
        </table>
        <button type="button" class="btn btn-sm btn-outline-primary" onclick="addRow()">â• æ–°å¢è¡Œ</button>
      </div>

      <!-- æ“ä½œæŒ‰é’® -->
      <div class="mt-4 d-flex gap-3">
        <input type="hidden" name="status" value="è‰ç¨¿" id="statusField">
        <button type="submit" class="btn btn-highlight" onclick="document.getElementById('statusField').value='è‰ç¨¿'">ä¿å­˜è‰ç¨¿</button>
        <button type="submit" class="btn btn-success" onclick="document.getElementById('statusField').value='å·²è¯„å®¡'">æäº¤å®¡æ ¸</button>
      </div>
    </form>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul style="color: green;">
          {% for msg in messages %}
            <li>{{ msg }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}
  </div>
</div>

<script>
  function addRow() {
    const table = document.getElementById('itemTable').querySelector('tbody');
    const newRow = table.rows[0].cloneNode(true);
    newRow.querySelectorAll('input').forEach(input => input.value = '');
    table.appendChild(newRow);
  }
  function removeRow(button) {
    const row = button.closest('tr');
    const table = row.closest('tbody');
    if (table.rows.length > 1) {
      row.remove();
    }
  }
</script>

</body>
</html>